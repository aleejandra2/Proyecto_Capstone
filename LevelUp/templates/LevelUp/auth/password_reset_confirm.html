{% extends "LevelUp/base.html" %}
{% load form_extras %}
{% block title %}Restablecer contraseña · LevelUp{% endblock %}

{% block content %}
<main style="min-height:calc(100vh - 220px); display:flex; align-items:center; background: linear-gradient(135deg,#f59e0b 0%, #ef4444 100%);">
  <div class="container" style="display:flex; justify-content:center;">
    <div class="card" style="width:100%; max-width:460px;">
      <div class="card-content">
        <h1 style="font-size:1.5rem; font-weight:800; margin-bottom:.75rem; color:#111827;">Define tu nueva contraseña</h1>

        {% if validlink %}
          <form method="post" novalidate>
            {% csrf_token %}
            <div class="form-group">
              <label class="form-label" for="{{ form.new_password1.id_for_label }}">Nueva contraseña</label>
              {{ form.new_password1|add_class:"form-input" }}
              {% for err in form.new_password1.errors %}
                <div class="msg error" style="margin-top:.35rem;">{{ err }}</div>
              {% endfor %}
            </div>

            <div class="form-group">
              <label class="form-label" for="{{ form.new_password2.id_for_label }}">Confirmar nueva contraseña</label>
              {{ form.new_password2|add_class:"form-input" }}
              {% for err in form.new_password2.errors %}
                <div class="msg error" style="margin-top:.35rem;">{{ err }}</div>
              {% endfor %}
            </div>

            <button type="submit" class="btn btn-primary" style="width:100%;">Guardar contraseña</button>
          </form>
        {% else %}
          <div class="msg error">El enlace no es válido o ha expirado. Pide uno nuevo.</div>
          <div style="margin-top:1rem;">
            <a class="btn btn-outline" href="{% url 'password_reset' %}">Solicitar nuevo enlace</a>
          </div>
        {% endif %}

        <div style="margin-top:1rem; text-align:center;">
          <a class="link" href="{% url 'login' %}">Volver al login</a>
        </div>
      </div>
    </div>
  </div>
</main>
{% endblock %}
