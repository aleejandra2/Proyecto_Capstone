{% extends "LevelUp/base.html" %}
{% load static %}
{% block title %}{{ titulo }} Â· Panel{% endblock %}

{% block content %}
<main class="container py-3">
    <div class="card shadow-sm">
        <div class="card-body">
            <h1 class="section-title mb-3">{{ titulo }}</h1>

            {% if messages %}
            {% for m in messages %}
            <div class="msg {{ m.tags }}">{{ m }}</div>
            {% endfor %}
            {% endif %}

            <form action="{{ post_url }}" method="post" class="row g-3" enctype="multipart/form-data">
                {% csrf_token %}

                {% for field in form.visible_fields %}
                <div class="col-12 col-md-6">
                    <label class="form-label" for="{{ field.id_for_label }}">{{ field.label }}</label>
                    {# Aplica clases si el widget no las trae #}
                    {% if field.field.widget.attrs.class %}
                    {{ field }}
                    {% else %}
                    {{ field|add_class:"form-control" }}
                    {% endif %}
                    {% if field.help_text %}<small class="text-muted d-block mt-1">{{ field.help_text }}</small>{% endif
                    %}
                    {% if field.errors %}<div class="invalid-feedback d-block">{{ field.errors|striptags }}</div>{%
                    endif %}
                </div>
                {% endfor %}

                {% for hidden in form.hidden_fields %}{{ hidden }}{% endfor %}

                {% if form.non_field_errors %}
                <div class="col-12">
                    <div class="alert alert-danger">{{ form.non_field_errors|striptags }}</div>
                </div>
                {% endif %}

                <div class="col-12">
                    <button class="btn btn-edu-navy" type="submit">Guardar</button>
                    <a class="btn btn-chip" href="javascript:history.back()">Cancelar</a>
                </div>
            </form>
        </div>
    </div>
</main>
{% endblock %}